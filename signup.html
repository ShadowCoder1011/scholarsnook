<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ScholarsNook — Sign Up</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<main class="container">
  <header class="brand">
    <h1>ScholarsNook</h1>
    <p class="tag">Start tracking your points</p>
  </header>

  <section class="card">
    <h2>Create Your Account</h2>

    <form id="signupForm">
      <div class="input-row">
        <label for="fullName">Full name</label>
        <input name="fullName" id="fullName" required />
      </div>
      <div class="input-row">
        <label for="department">Department / College</label>
        <input name="department" id="department" required />
      </div>
      <div class="input-row">
        <label for="username">Username</label>
        <input name="reg_username" id="username" type="text" required />
      </div>
      <div class="input-row">
        <label for="signupPassword">Choose a password</label>
        <input name="signupPassword" id="signupPassword" type="password" required />
      </div>
      <div class="actions">
        <button type="submit">Create account</button>
        <a href="login.html" class="alt-btn">Back to Login</a>
      </div>
    </form>
    <p id="msg" class="muted" style="color:green;margin-top:8px;"></p>
  </section>
</main>

<script>
const SHEET_ID = '1BxiY6lRCKikGYLNAc0g8i9z5z8VfG7lKZc6PQrN9xqw';   // ← edit-url ID
const API_KEY  = 'AIzaSyDJ0zMobyM-fnhjaPnNvhVmWRqU-jES5Hs';        // ← your API key
const ENDPOINT = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Sheet1!A:E/append?valueInputOption=RAW&key=${API_KEY}`;

document.getElementById('signupForm').addEventListener('submit', async e => {
  e.preventDefault();
  const f = e.target;
  const body = [
    f.fullName.value.trim(),
    f.department.value.trim(),
    f.reg_username.value.trim(),
    f.signupPassword.value.trim(),
    parseInt(f.initPoints?.value || 0)
  ];

  try {
    const resp = await fetch(ENDPOINT, {
      method: 'POST',
      body: JSON.stringify({ values: [body] })
      // ← no headers at all
    });
    if (resp.ok) {
      document.getElementById('msg').style.color = 'green';
      document.getElementById('msg').textContent = 'Registration successful! Redirecting…';
      setTimeout(() => location.href = 'login.html', 1500);
    } else {
      const err = await resp.json();
      document.getElementById('msg').style.color = 'red';
      document.getElementById('msg').textContent = err.error.message || 'Failed to register.';
    }
  } catch (e) {
    console.error(e);
    document.getElementById('msg').style.color = 'red';
    document.getElementById('msg').textContent = 'Network error – check console.';
    console.error(e);
  }
});
</script>
</body>
</html>








